<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>게시글 작성</title>
</head>
<body>
<h1>게시글 작성</h1>
<form th:action="@{/authBoard/create}" method="post" enctype="multipart/form-data">
  <label for="title">제목:</label>
  <input type="text" id="title" name="title" required>
  <br>
  <label for="content">내용:</label>
  <textarea id="content" name="content" required></textarea>
  <br>
  <label for="file">이미지 업로드:</label>
  <input type="file" id="file" name="file" accept="image/*" required>
  <br>
  <img id="preview" src="#" alt="이미지 미리보기" style="display: none; max-width: 200px; max-height: 200px;"/>
  <br>
  <button type="submit">게시글 작성</button>
  <button type="button" id="cancelButton">취소</button>
</form>
<div th:if="${error}">
  <p th:text="${error}"></p>
</div>

<script>
  document.getElementById('file').addEventListener('change', function(event) {
    var preview = document.getElementById('preview');
    var file = event.target.files[0];
    var reader = new FileReader();

    reader.onload = function(e) {
      preview.src = e.target.result;
      preview.style.display = 'block';
    };

    if (file) {
      reader.readAsDataURL(file);
    } else {
      preview.src = '#';
      preview.style.display = 'none';
    }
  });
</script>
</body>
</html>
