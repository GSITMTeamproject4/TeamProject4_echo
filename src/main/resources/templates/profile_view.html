<!DOCTYPE html>
<html layout:decorate="~{layout}" xmlns:layout="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<div layout:fragment="content" class="profile-content " >
  <th:block layout:fragment="css">
    <link rel="stylesheet" th:href="@{/css/mypage/profile_view.css}">
  </th:block>

  <div class="container-fluid py-4">
    <div class="row">
      <div class="col-md-8 profile-info-card">
        <div class="card">
          <div class="card-header pb-0">
            <div class="d-flex align-items-center">
              <p class="mb-0">프로필 정보</p>
              <a th:href="@{/mypage/edit/{userId}(userId=${user.userId})}" class="btn btn-primary btn-sm ms-auto">수정</a>
            </div>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-md-6">
                <div class="form-group">
                  <label for="userId" class="form-control-label">사용자 ID</label>
                  <input class="form-control" type="text" id="userId" th:value="${user.userId}" readonly>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="userName" class="form-control-label">이름</label>
                  <input class="form-control" type="text" id="userName" th:value="${user.userName}" readonly>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="nickName" class="form-control-label">닉네임</label>
                  <input class="form-control" type="text" id="nickName" th:value="${user.nickName}" readonly>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="phoneNum" class="form-control-label">전화번호</label>
                  <input class="form-control" type="text" id="phoneNum" th:value="${user.phoneNum}" readonly>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="gender" class="form-control-label">성별</label>
                  <input class="form-control" type="text" id="gender" th:value="${user.gender == 'M' ? '남성' : '여성'}" readonly>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="email" class="form-control-label">Email</label>
                  <input class="form-control" type="email" id="email" th:value="${user.email}" readonly>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="zipcode" class="form-control-label">우편번호</label>
                  <input class="form-control" type="text" id="zipcode" th:value="${user.zipcode}" readonly>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="streetaddr" class="form-control-label">도로명주소</label>
                  <input class="form-control" type="text" id="streetaddr" th:value="${user.streetaddr}" readonly>
                </div>
              </div>

              <div class="col-md-6">
                <div class="form-group">
                  <label for="detailaddr" class="form-control-label">상세주소</label>
                  <input class="form-control" type="text" id="detailaddr" th:value="${user.detailaddr}" readonly>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4 profile-card">
          <div class="card card-profile">
            <img th:src="@{/img/profile-bg.jpg}" alt="Image placeholder" class="card-img-top">
            <div class="row justify-content-center">
              <div class="col-4 col-lg-4 order-lg-2">
                <div class="mt-n4 mt-lg-n6 mb-4 mb-lg-0 profile_card_img">
                  <img th:src="${user.profileImage.filePath == '/img/default-profile.png' ? '/img/default-profile.png' : '/uploads/' + user.profileImage.filePath}"
                       class="rounded-circle img-fluid border border-2 border-white  profile_img"
                       alt="Profile Image">
                </div>
              </div>
            </div>
            <div class="card-body pt-0">
              <div class="text-center mt-4">
                <h5 th:text="${user.userName}" class="user-profile-name">사용자 이름</h5>
                <div class="user-profile-points-coupons">
                  <a th:href="@{/mypage/point-status/{userId}(userId=${user.userId})}">
                    <span class="user-profile-points" th:text="'보유 포인트: ' + ${user.currentPoint}"></span>
                  </a>
                  <a th:href="@{/user/coupons}"><span class="user-profile-coupons" th:text="'보유 쿠폰: ' + ${couponCount}"></span></a>
                </div>
                <div class="user-profile-info">
                  <p th:if="${user.email != null and !user.email.isEmpty()}">
                    <i class="fas fa-envelope mr-2"></i>
                    <span th:text="${user.email}">사용자 이메일</span>
                  </p>
                  <p th:if="${user.phoneNum != null and !user.phoneNum.isEmpty()}">
                    <i class="fas fa-phone mr-2"></i>
                    <span th:text="${user.phoneNum}">전화번호</span>
                  </p>
                  <p th:if="${user.streetaddr != null and !user.streetaddr.isEmpty()}">
                    <i class="fas fa-map-marker-alt mr-2"></i>
                    <span th:text="${user.streetaddr}">주소</span>
                  </p>
                </div>
                <div class="user-profile-actions mt-4">
                  <a th:href="@{/mypage/edit/{userId}(userId=${user.userId})}" class="btn btn-primary btn-sm user-profile-btn">
                    프로필 수정
                  </a>
                  <a th:href="@{/mypage/my-posts/{userId}(userId=${user.userId})}" class="btn btn-secondary btn-sm user-profile-btn">
                    나의 게시글 보기
                  </a>
                  <a th:href="@{/order}" class="btn btn-secondary btn-sm user-profile-btn btn-third">
                    나의 구매목록 보기
                  </a>
                  <a th:href="@{/mypage/useamount-detail/{userId}(userId=${user.userId}, year=${year})}" class="btn btn-info btn-sm user-profile-btn usage_btn  white-text">
                    사용량 보기
                  </a>
                  <a th:href="@{/challenge}" class="btn btn-success btn-sm user-profile-btn">
                    챌린지 현황
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
</html>


